<?xml version="1.0" encoding="UTF-8" ?>
<!-- DTD 규격을 맞춰줘야 태그들을 사용할 수 있다. 문서 스키마 -->
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ssg.membertest.mapper.MemberMapper">

  <!--  받고자하는 데이터 지정-->
  <resultMap id="MemberResultMap" type="com.ssg.membertest.dto.MemberDTO">
    <id property="mid"    column="mid"/>
    <result property="mpw"   column="mpw"/>
    <result property="mname"  column="mname"/>
    <result property="joinDate"  column="joinDate" jdbcType="DATE" javaType="java.time.LocalDate"/>
  </resultMap>

  <!-- java.time.LocalDate 매핑 : JSR-310 타입 핸들러 이용-->
  <insert id="insert" parameterType="com.ssg.membertest.dto.MemberDTO">
    INSERT INTO member (mid, mpw, mname, joinDate)
    VALUES (#{mid}, #{mpw}, #{mname},
    #{joinDate, jdbcType=DATE, javaType=java.time.LocalDate})
  </insert>

  <select id="findAll" resultMap="MemberResultMap">
    SELECT mid, mpw, mname, joinDate
    FROM member
    ORDER BY mid
  </select>

  <select id="findById" parameterType="string" resultMap="MemberResultMap">
    SELECT mid, mpw, mname, joinDate
    FROM member
    WHERE mid = #{mid}
  </select>
</mapper>